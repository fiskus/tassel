// Generated by CoffeeScript 1.6.1
var Bookmarks;

Bookmarks = (function() {

  function Bookmarks() {}

  Bookmarks.prototype.init = function() {
    this.initModel();
    this.initRenderer();
    this.input = document.querySelectorAll('.input');
    return this.input[0].addEventListener('keyup', _.bind(this.onKey, this));
  };

  Bookmarks.prototype.onKey = function(event) {
    var searches;
    searches = this.input[0].value.split(' ');
    return _.each(searches, this.onSearch, this);
  };

  Bookmarks.prototype.onSearch = function(value) {
    var bookmarks, results;
    bookmarks = this.model.get();
    results = [];
    _.each(bookmarks, function(bookmark) {
      if (bookmark.title.indexOf(value) > -1) {
        return results.push(bookmark);
      }
    });
    return this.renderer.render(results);
  };

  Bookmarks.prototype.initRenderer = function() {
    this.renderer = new BookmarksRenderer();
    this.renderer.setModel(this.model);
    return this.renderer.init();
  };

  Bookmarks.prototype.initModel = function() {
    this.model = new BookmarksModel();
    return this.model.init();
  };

  return Bookmarks;

})();
